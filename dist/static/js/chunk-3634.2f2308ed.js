(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3634"],{ImYl:function(t,e,n){"use strict";var i=n("s52P");n.n(i).a},WAZQ:function(t,e,n){"use strict";var i=n("Wnmo");n.n(i).a},WTsO:function(t,e,n){"use strict";var i=n("JDVc"),a=n("fqLP"),r=n("7Qib");var s={name:"clusterForm",props:{showType:{type:String,default:i.d.create},editItem:{type:Object}},data:function(){return{loading:!0,submitting:!1,loadBalanceConstant:i.i,rules:{name:{required:!0,message:"请填写集群名称",trigger:"change"}},tempItem:{id:void 0,name:void 0,loadBalance:i.j.roundRobin}}},watch:{editItem:function(t,e){this.tempItem=Object(r.d)(this.tempItem,Object(r.a)(t)),this.loading=!1,this.submitting=!1}},computed:{isShow:function(){return this._isShow()},isCreate:function(){return this._isCreate()},isUpdate:function(){return this._isUpdate()}},created:function(){this.init()},methods:{init:function(){this._isShow()?this.rules={}:this._isCreate()&&(this.loading=!1)},goList:function(){this.$router.replace({path:"/cluster"}),this.$destroy()},createItem:function(t){var e=this;this.submitting||this.$refs[t].validate(function(t){if(!t)return!1;e._doCreateItem()})},_doCreateItem:function(){var t=this,e=Object(r.a)(this.tempItem);this.submitting=!0,a.e(e).then(function(){t.$message({type:"success",message:"创建成功!"}),setTimeout(function(){t.goList()},2e3)}).catch(function(){t.submitting=!1})},updateItem:function(t){var e=this;this.submitting||this.$refs[t].validate(function(t){if(!t)return!1;e._doUpdateItem()})},_doUpdateItem:function(){var t=this,e=Object(r.a)(this.tempItem);this.submitting=!0,a.e(e).then(function(){t.$message({type:"success",message:"修改成功!"}),setTimeout(function(){t.goList()},2e3)}).catch(function(){t.submitting=!1})},_isUpdate:function(){return this.showType===i.d.update},_isShow:function(){return this.showType===i.d.show},_isCreate:function(){return this.showType===i.d.create}}},o=(n("WAZQ"),n("KHd+")),u=Object(o.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataForm",attrs:{rules:t.rules,model:t.tempItem,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"Cluster名称",prop:"name"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:t.tempItem.name,callback:function(e){t.$set(t.tempItem,"name",e)},expression:"tempItem.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"负载均衡算法"}},[n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"负载均衡算法"},model:{value:t.tempItem.loadBalance,callback:function(e){t.$set(t.tempItem,"loadBalance",e)},expression:"tempItem.loadBalance"}},t._l(t.loadBalanceConstant,function(t){return n("el-option",{key:t.value,attrs:{value:t.value,label:t.title}})}),1)],1),t._v(" "),n("div",{staticStyle:{"margin-left":"70px"}},[n("el-button",{on:{click:t.goList}},[t._v("返回")]),t._v(" "),t.isCreate?n("el-button",{attrs:{loading:t.submitting,type:"primary"},on:{click:function(e){t.createItem("dataForm")}}},[t._v("提交\n            ")]):t.isUpdate?n("el-button",{attrs:{loading:t.submitting,type:"primary"},on:{click:function(e){t.updateItem("dataForm")}}},[t._v("提交\n            ")]):t._e()],1)],1)],1)},[],!1,null,"eee54722",null);u.options.__file="ClusterForm.vue";e.a=u.exports},Wnmo:function(t,e,n){},fqLP:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return d}),n.d(e,"a",function(){return l}),n.d(e,"c",function(){return m});var i=n("4d7F"),a=n.n(i),r=n("t3Un"),s=n("JDVc"),o="/clusters";function u(){return new a.a(function(t,e){var n=[],i="",a=s.c;!function s(u){(function(t){return Object(r.a)({url:o,method:"GET",params:t})})(u).then(function(e){var r=(e=e||[]).length;r>0?(n=n.concat(e),(i=e[r-1]||{}).id&&s({after:i.id,limit:a})):t(n)}).catch(function(){e()})}({after:"",limit:a})})}function c(t){return Object(r.a)({url:o+"/"+t,method:"GET"})}function d(t){return Object(r.a)({url:o,method:"PUT",data:t})}function l(t){return Object(r.a)({url:o+"/"+t,method:"DELETE"})}function m(t){return Object(r.a)({url:o+"/"+t+"/binds",method:"GET"})}},s52P:function(t,e,n){},t3Un:function(t,e,n){"use strict";var i=n("4d7F"),a=n.n(i),r=n("vDqi"),s=n.n(r),o=n("XJYT"),u=s.a.create({baseURL:"/v1",timeout:6e4});u.interceptors.request.use(function(t){return t},function(t){console.error(t),a.a.reject(t)}),u.interceptors.response.use(function(t){var e=t.data||{};t.headers;return 0===e.code?e.data:(Object(o.Message)({message:e.data,type:"error",duration:5e3}),a.a.reject("error"))},function(t){return Object(o.Message)({message:t.response&&t.response.data&&t.response.data.data||"网络异常",type:"error",duration:5e3}),a.a.reject(t)}),e.a=u},yvAz:function(t,e,n){"use strict";n.r(e);var i=n("WTsO"),a=n("fqLP"),r={name:"clusterEdit",data:function(){return{id:"",item:{}}},components:{ClusterForm:i.a},created:function(){this.init()},watch:{$route:function(t,e){"clusterEdit"!=t.name&&this.$destroy()}},methods:{init:function(){var t=this;this.id=this.$route.query.id;var e=this.id;e&&a.d(e).then(function(e){t.item=e})}}},s=(n("ImYl"),n("KHd+")),o=Object(s.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("cluster-form",{attrs:{"show-type":"update",editItem:t.item},on:{"update:editItem":function(e){t.item=e}}})],1)},[],!1,null,"4ab18a9c",null);o.options.__file="edit.vue";e.default=o.exports}}]);